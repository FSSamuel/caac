{% extends "base.html" %}
{% load static %}

{% block title %}Give | {{ block.super }}{% endblock %}

{% block content %}
<!-- Hero Section with Video Background Option -->
<section class="giving-hero position-relative py-5 text-white"  style="background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                url('https://images.unsplash.com/photo-1503177119275-0aa32b3a9368?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');
                background-size: cover;
                background-position: center;
                min-height: 60vh; color: white;">
    <div class="hero-overlay"></div>
    <div class="container py-5 position-relative">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-3 fw-bold mb-3">Join God's Work Through Giving</h1>
                <p class="lead fs-4 mb-4">Your generosity fuels our mission to spread the Gospel and serve our community</p>
                <div class="d-flex flex-wrap justify-content-center gap-3">
                    <a href="#online-giving" class="btn btn-primary btn-lg px-4 py-3">
                        <i class="fas fa-gift me-2"></i> Give Online Now
                    </a>
                    <a href="#other-options" class="btn btn-light btn-lg px-4 py-3">
                        <i class="fas fa-ellipsis-h me-2"></i> Other Giving Options
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Why Give Section -->
<section class="py-5 bg-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <h2 class="display-5 fw-bold mb-4">Why We Give</h2>
                <p class="lead">"Each of you should give what you have decided in your heart to give, not reluctantly or under compulsion, for God loves a cheerful giver."</p>
                <p class="mb-4">- 2 Corinthians 9:7</p>
                <div class="bg-light p-4 rounded-3">
                    <h4 class="mb-3">Your Giving Supports:</h4>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-check-circle text-primary me-2"></i> Local community outreach programs</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-primary me-2"></i> International missions work</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-primary me-2"></i> Church operations and ministries</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-primary me-2"></i> Benevolence and crisis support</li>
                        <li><i class="fas fa-check-circle text-primary me-2"></i> Youth and children's programs</li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="ratio ratio-16x9 rounded-3 overflow-hidden shadow">
                    <iframe src="https://www.youtube.com/embed/YOUR_VIDEO_ID" title="Why Giving Matters" allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Online Giving Section -->
<section id="online-giving" class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Online Giving</h2>
            <p class="lead">Safe, secure, and simple giving in just a few steps</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-8">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4 p-md-5">
                        <div class="stepper mb-5">
                            <div class="stepper-progress">
                                <div class="stepper-progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="stepper-items">
                                <div class="stepper-item active" data-step="1">
                                    <div class="stepper-item-counter">1</div>
                                    <div class="stepper-item-label">Amount</div>
                                </div>
                                <div class="stepper-item" data-step="2">
                                    <div class="stepper-item-counter">2</div>
                                    <div class="stepper-item-label">Fund</div>
                                </div>
                                <div class="stepper-item" data-step="3">
                                    <div class="stepper-item-counter">3</div>
                                    <div class="stepper-item-label">Payment</div>
                                </div>
                                <div class="stepper-item" data-step="4">
                                    <div class="stepper-item-counter">4</div>
                                    <div class="stepper-item-label">Details</div>
                                </div>
                            </div>
                        </div>
                        
                        <form id="donation-form" method="post">
                            {% csrf_token %}
                            
                            <!-- Step 1: Amount Selection -->
                            <div class="step-content active" data-step="1">
                                <h3 class="mb-4">Select Your Gift Amount (AUD)</h3>
                                <div class="row g-3">
                                    <div class="col-6 col-md-4">
                                        <input type="radio" class="btn-check" name="amount" id="amount-20" value="20" checked>
                                        <label class="btn btn-outline-primary w-100 py-3 fs-5" for="amount-20">
                                            $20
                                        </label>
                                    </div>
                                    <div class="col-6 col-md-4">
                                        <input type="radio" class="btn-check" name="amount" id="amount-50" value="50">
                                        <label class="btn btn-outline-primary w-100 py-3 fs-5" for="amount-50">
                                            $50
                                        </label>
                                    </div>
                                    <div class="col-6 col-md-4">
                                        <input type="radio" class="btn-check" name="amount" id="amount-100" value="100">
                                        <label class="btn btn-outline-primary w-100 py-3 fs-5" for="amount-100">
                                            $100
                                        </label>
                                    </div>
                                    <div class="col-6 col-md-4">
                                        <input type="radio" class="btn-check" name="amount" id="amount-200" value="200">
                                        <label class="btn btn-outline-primary w-100 py-3 fs-5" for="amount-200">
                                            $200
                                        </label>
                                    </div>
                                    <div class="col-6 col-md-4">
                                        <input type="radio" class="btn-check" name="amount" id="amount-500" value="500">
                                        <label class="btn btn-outline-primary w-100 py-3 fs-5" for="amount-500">
                                            $500
                                        </label>
                                    </div>
                                    <div class="col-6 col-md-4">
                                        <input type="radio" class="btn-check" name="amount" id="amount-other" value="other">
                                        <label class="btn btn-outline-primary w-100 py-3 fs-5" for="amount-other">
                                            Other
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="mt-4" id="custom-amount-container" style="display:none;">
                                    <label class="form-label fs-5">Custom Amount</label>
                                    <div class="input-group input-group-lg">
                                        <span class="input-group-text">$</span>
                                        <input type="number" class="form-control" name="custom_amount" placeholder="Enter amount">
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-between mt-5">
                                    <button type="button" class="btn btn-outline-secondary disabled">Previous</button>
                                    <button type="button" class="btn btn-primary next-step">Continue</button>
                                </div>
                            </div>
                            
                            <!-- Step 2: Fund Selection -->
                            <div class="step-content" data-step="2" style="display:none;">
                                <h3 class="mb-4">Where Would You Like To Give?</h3>
                                <div class="fund-options">
                                    <div class="card mb-3 fund-option">
                                        <div class="card-body">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="fund" id="fund-1" value="1" checked>
                                                <label class="form-check-label" for="fund-1">
                                                    <h5 class="mb-1">General Fund</h5>
                                                    <p class="text-muted mb-0">Supports the general ministry and operations of the church</p>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-3 fund-option">
                                        <div class="card-body">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="fund" id="fund-2" value="2">
                                                <label class="form-check-label" for="fund-2">
                                                    <h5 class="mb-1">Missions</h5>
                                                    <p class="text-muted mb-0">Supports our local and international missions work</p>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card mb-3 fund-option">
                                        <div class="card-body">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="fund" id="fund-3" value="3">
                                                <label class="form-check-label" for="fund-3">
                                                    <h5 class="mb-1">Benevolence</h5>
                                                    <p class="text-muted mb-0">Helps those in need within our community</p>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-outline-secondary prev-step">Previous</button>
                                    <button type="button" class="btn btn-primary next-step">Continue</button>
                                </div>
                            </div>
                            
                            <!-- Step 3: Payment Method -->
                            <div class="step-content" data-step="3" style="display:none;">
                                <h3 class="mb-4">Select Payment Method</h3>
                                
                                <div class="payment-methods">
                                    <!-- Credit/Debit Card -->
                                    <div class="card mb-3 payment-option">
                                        <div class="card-body">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="payment_method" id="method-card" value="card" checked>
                                                <label class="form-check-label" for="method-card">
                                                    <div class="d-flex align-items-center">
                                                        <i class="far fa-credit-card fa-2x me-3 text-primary"></i>
                                                        <div>
                                                            <h5 class="mb-1">Credit/Debit Card</h5>
                                                            <div class="payment-icons">
                                                                <i class="fab fa-cc-visa fa-lg me-2"></i>
                                                                <i class="fab fa-cc-mastercard fa-lg me-2"></i>
                                                                <i class="fab fa-cc-amex fa-lg me-2"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </label>
                                            </div>
                                            <div id="card-element" class="mt-3 p-3 border rounded"></div>
                                        </div>
                                    </div>
                                    
                                    <!-- Direct Debit (Australian Specific) -->
                                    <div class="card payment-option">
                                        <div class="card-body">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="payment_method" id="method-direct-debit" value="direct_debit">
                                                <label class="form-check-label" for="method-direct-debit">
                                                    <div class="d-flex align-items-center">
                                                        <i class="fas fa-bank fa-2x me-3 text-success"></i>
                                                        <div>
                                                            <h5 class="mb-1">Direct Debit</h5>
                                                            <p class="text-muted small mb-0">Direct from your Australian bank account</p>
                                                        </div>
                                                    </div>
                                                </label>
                                            </div>
                                            <div id="direct-debit-fields" class="mt-3" style="display: none;">
                                                <div class="row g-3">
                                                    <div class="col-md-6">
                                                        <label class="form-label">BSB</label>
                                                        <input type="text" class="form-control" name="bsb" placeholder="XXX-XXX">
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">Account Number</label>
                                                        <input type="text" class="form-control" name="account_number">
                                                    </div>
                                                    <div class="col-12">
                                                        <label class="form-label">Account Name</label>
                                                        <input type="text" class="form-control" name="account_name">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Recurring Option -->
                                <div class="form-check form-switch mt-4">
                                    <input class="form-check-input" type="checkbox" id="is_recurring" name="is_recurring">
                                    <label class="form-check-label" for="is_recurring">
                                        <strong>Make this a recurring monthly gift</strong>
                                    </label>
                                </div>
                                
                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-outline-secondary prev-step">Previous</button>
                                    <button type="button" class="btn btn-primary next-step">Continue</button>
                                </div>
                            </div>
                            
                            <!-- Step 4: Personal Details -->
                            <div class="step-content" data-step="4" style="display:none;">
                                <h3 class="mb-4">Your Information</h3>
                                
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">First Name</label>
                                        <input type="text" class="form-control" name="first_name" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Last Name</label>
                                        <input type="text" class="form-control" name="last_name" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" name="email" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Phone</label>
                                        <input type="tel" class="form-control" name="phone">
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Address</label>
                                        <input type="text" class="form-control" name="address">
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Suburb</label>
                                        <input type="text" class="form-control" name="suburb">
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">State</label>
                                        <select class="form-select" name="state">
                                            <option value="">Select</option>
                                            <option value="NSW">New South Wales</option>
                                            <option value="VIC">Victoria</option>
                                            <option value="QLD">Queensland</option>
                                            <option value="WA">Western Australia</option>
                                            <option value="SA">South Australia</option>
                                            <option value="TAS">Tasmania</option>
                                            <option value="ACT">Australian Capital Territory</option>
                                            <option value="NT">Northern Territory</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Postcode</label>
                                        <input type="text" class="form-control" name="postcode">
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Message (Optional)</label>
                                        <textarea class="form-control" name="message" rows="3"></textarea>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="tax_receipt" name="tax_receipt" checked>
                                            <label class="form-check-label" for="tax_receipt">
                                                Email me a tax receipt (required for tax deductions)
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-outline-secondary prev-step">Previous</button>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-lock me-2"></i> Complete Donation
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4">
                        <h3 class="mb-4">Your Donation Summary</h3>
                        
                        <div class="donation-summary mb-4">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Amount:</span>
                                <strong id="summary-amount">$20.00</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Fund:</span>
                                <strong id="summary-fund">General Fund</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Frequency:</span>
                                <strong id="summary-frequency">One-time</strong>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Payment Method:</span>
                                <strong id="summary-method">Credit Card</strong>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between fs-5">
                                <span>Total:</span>
                                <strong id="summary-total">$20.00</strong>
                            </div>
                        </div>
                        
                        <div class="security-info bg-light p-3 rounded-3 mb-4">
                            <div class="d-flex align-items-center mb-2">
                                <i class="fas fa-shield-alt text-success me-2"></i>
                                <span>Secure 256-bit SSL Encryption</span>
                            </div>
                            <div class="d-flex align-items-center">
                                <i class="fas fa-lock text-success me-2"></i>
                                <span>PCI DSS Compliant</span>
                            </div>
                        </div>
                        
                        <div class="testimonial bg-primary text-white p-4 rounded-3">
                            <blockquote class="mb-3">
                                "Your generosity enables us to serve our community and share the love of Christ."
                            </blockquote>
                            <div class="d-flex align-items-center">
                                <img src="{% static 'img/pastor.jpg' %}" class="rounded-circle me-3" width="50" alt="Pastor">
                                <div>
                                    <div class="fw-bold">Pastor John Smith</div>
                                    <div class="small">Senior Pastor</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Other Giving Options -->
<section id="other-options" class="py-5 bg-white">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Other Ways to Give</h2>
            <p class="lead">Choose the method that works best for you</p>
        </div>
        
        <div class="row g-4">
            <!-- Bank Transfer -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="icon-wrapper bg-primary bg-opacity-10 text-primary rounded-circle p-3 d-inline-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px;">
                            <i class="fas fa-university fa-2x"></i>
                        </div>
                        <h4 class="mb-3">Bank Transfer</h4>
                        <div class="text-start">
                            <p><strong>Account Name:</strong> [Church Name]</p>
                            <p><strong>BSB:</strong> XXX-XXX</p>
                            <p><strong>Account Number:</strong> XXXXXXXX</p>
                            <p><strong>Reference:</strong> Your Name</p>
                        </div>
                        <button class="btn btn-outline-primary w-100 mt-3" data-bs-toggle="modal" data-bs-target="#bankDetailsModal">
                            <i class="fas fa-copy me-2"></i> Copy Details
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- In Person -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="icon-wrapper bg-primary bg-opacity-10 text-primary rounded-circle p-3 d-inline-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px;">
                            <i class="fas fa-hand-holding-usd fa-2x"></i>
                        </div>
                        <h4 class="mb-3">In Person</h4>
                        <p>Give during our Sunday services or visit our office during business hours.</p>
                        <p><strong>Office Hours:</strong><br>Mon-Fri: 9am-4pm</p>
                        <a href="/contact" class="btn btn-outline-primary w-100 mt-2">
                            <i class="fas fa-map-marker-alt me-2"></i> Get Directions
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Cheque -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="icon-wrapper bg-primary bg-opacity-10 text-primary rounded-circle p-3 d-inline-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px;">
                            <i class="fas fa-money-check-alt fa-2x"></i>
                        </div>
                        <h4 class="mb-3">Cheque</h4>
                        <p>Make cheques payable to:</p>
                        <p class="fw-bold">[Church Name]</p>
                        <p>Mail to:</p>
                        <p>[Church Address]</p>
                        <button class="btn btn-outline-primary w-100 mt-2" data-bs-toggle="modal" data-bs-target="#chequeModal">
                            <i class="fas fa-info-circle me-2"></i> More Info
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Planned Giving -->
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="icon-wrapper bg-primary bg-opacity-10 text-primary rounded-circle p-3 d-inline-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px;">
                            <i class="fas fa-calendar-alt fa-2x"></i>
                        </div>
                        <h4 class="mb-3">Planned Giving</h4>
                        <p>Set up regular automatic payments from your bank account.</p>
                        <p>Great for budgeting and consistent support.</p>
                        <a href="/planned-giving" class="btn btn-outline-primary w-100 mt-2">
                            <i class="fas fa-download me-2"></i> Download Form
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Giving FAQs -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Giving FAQs</h2>
            <p class="lead">Answers to common questions about giving</p>
        </div>
        
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <div class="accordion" id="givingFAQ">
                    <!-- FAQ Item 1 -->
                    <div class="accordion-item mb-3 border-0 shadow-sm">
                        <h3 class="accordion-header" id="faqHeading1">
                            <button class="accordion-button fs-4" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse1" aria-expanded="true" aria-controls="faqCollapse1">
                                Is my donation tax deductible?
                            </button>
                        </h3>
                        <div id="faqCollapse1" class="accordion-collapse collapse show" aria-labelledby="faqHeading1" data-bs-parent="#givingFAQ">
                            <div class="accordion-body">
                                <p>Yes, [Church Name] is a registered charity with the Australian Charities and Not-for-profits Commission (ACNC). All donations over $2 are tax deductible. You will receive a receipt immediately after your donation that you can use for tax purposes.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 2 -->
                    <div class="accordion-item mb-3 border-0 shadow-sm">
                        <h3 class="accordion-header" id="faqHeading2">
                            <button class="accordion-button collapsed fs-4" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse2" aria-expanded="false" aria-controls="faqCollapse2">
                                How secure is online giving?
                            </button>
                        </h3>
                        <div id="faqCollapse2" class="accordion-collapse collapse" aria-labelledby="faqHeading2" data-bs-parent="#givingFAQ">
                            <div class="accordion-body">
                                <p>Our online giving platform uses industry-standard 256-bit SSL encryption and is PCI DSS compliant. We partner with Stripe and PayPal, world leaders in secure online payments, to process all transactions. Your financial information is never stored on our servers.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 3 -->
                    <div class="accordion-item mb-3 border-0 shadow-sm">
                        <h3 class="accordion-header" id="faqHeading3">
                            <button class="accordion-button collapsed fs-4" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse3" aria-expanded="false" aria-controls="faqCollapse3">
                                Can I cancel or modify a recurring donation?
                            </button>
                        </h3>
                        <div id="faqCollapse3" class="accordion-collapse collapse" aria-labelledby="faqHeading3" data-bs-parent="#givingFAQ">
                            <div class="accordion-body">
                                <p>Yes, you can modify or cancel your recurring donation at any time by contacting our finance office at <a href="mailto:giving@church.org">giving@church.org</a> or calling (02) XXXX XXXX during business hours. You can also manage your recurring donations through the confirmation email you received when you set up the recurring gift.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 4 -->
                    <div class="accordion-item mb-3 border-0 shadow-sm">
                        <h3 class="accordion-header" id="faqHeading4">
                            <button class="accordion-button collapsed fs-4" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse4" aria-expanded="false" aria-controls="faqCollapse4">
                                What payment methods do you accept?
                            </button>
                        </h3>
                        <div id="faqCollapse4" class="accordion-collapse collapse" aria-labelledby="faqHeading4" data-bs-parent="#givingFAQ">
                            <div class="accordion-body">
                                <p>We accept multiple payment methods to make giving convenient:</p>
                                <ul>
                                    <li>Credit/Debit Cards (Visa, Mastercard, American Express)</li>
                                    <li>Apple Pay</li>
                                    <li>Google Pay</li>
                                    <li>PayPal</li>
                                    <li>Direct Debit (Australian bank accounts)</li>
                                    <li>Bank Transfers</li>
                                    <li>Cheques</li>
                                    <li>Cash (in person)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FAQ Item 5 -->
                    <div class="accordion-item border-0 shadow-sm">
                        <h3 class="accordion-header" id="faqHeading5">
                            <button class="accordion-button collapsed fs-4" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse5" aria-expanded="false" aria-controls="faqCollapse5">
                                How are donations used?
                            </button>
                        </h3>
                        <div id="faqCollapse5" class="accordion-collapse collapse" aria-labelledby="faqHeading5" data-bs-parent="#givingFAQ">
                            <div class="accordion-body">
                                <p>Your donations are used to support:</p>
                                <ul>
                                    <li>Local church ministries and operations</li>
                                    <li>Community outreach programs</li>
                                    <li>International missions and partnerships</li>
                                    <li>Facility maintenance and improvements</li>
                                    <li>Staff support and pastoral care</li>
                                </ul>
                                <p>You can designate your gift to specific funds when making your donation.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Trust Badges - Australian Specific -->
<section class="py-4 bg-white border-top">
    <div class="container">
        <div class="row g-3 justify-content-center align-items-center">
            <div class="col-auto">
                <img src="{% static 'img/acnc-registered.png' %}" alt="ACNC Registered" height="50">
            </div>
            <div class="col-auto">
                <img src="{% static 'img/stripe-badge.png' %}" alt="Stripe Secured" height="40">
            </div>
            <div class="col-auto">
                <img src="{% static 'img/paypal-badge.png' %}" alt="PayPal Verified" height="40">
            </div>
            <div class="col-auto">
                <img src="{% static 'img/pci-compliant.png' %}" alt="PCI Compliant" height="40">
            </div>
            <div class="col-auto">
                <img src="{% static 'img/ssl-secured.png' %}" alt="SSL Secured" height="40">
            </div>
            <div class="col-auto">
                <img src="{% static 'img/aus-charity.png' %}" alt="Registered Australian Charity" height="40">
            </div>
        </div>
    </div>
</section>

<!-- Bank Details Modal -->
<div class="modal fade" id="bankDetailsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Bank Transfer Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Account Name</label>
                            <div class="input-group">
                                <input type="text" class="form-control" value="[Church Name]" id="accountName" readonly>
                                <button class="btn btn-outline-secondary" onclick="copyToClipboard('accountName')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">BSB</label>
                            <div class="input-group">
                                <input type="text" class="form-control" value="XXX-XXX" id="bsb" readonly>
                                <button class="btn btn-outline-secondary" onclick="copyToClipboard('bsb')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Account Number</label>
                            <div class="input-group">
                                <input type="text" class="form-control" value="XXXXXXXX" id="accountNumber" readonly>
                                <button class="btn btn-outline-secondary" onclick="copyToClipboard('accountNumber')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="bg-light p-3 rounded-3 h-100">
                            <h6><i class="fas fa-info-circle me-2"></i> Important Information</h6>
                            <ul class="small">
                                <li class="mb-2">Use your name as the payment reference</li>
                                <li class="mb-2">Email giving@church.org with transfer details</li>
                                <li class="mb-2">Receipts issued within 2 business days</li>
                                <li>Transfers typically take 1-2 business days</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="copyAllBankDetails()">
                    <i class="fas fa-copy me-2"></i> Copy All Details
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Cheque Modal -->
<div class="modal fade" id="chequeModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Cheque Donation Information</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-4">
                    <p>Please make cheques payable to:</p>
                    <div class="bg-light p-3 rounded-3 text-center">
                        <h4 class="mb-0">[Church Name]</h4>
                    </div>
                </div>
                
                <div class="mb-4">
                    <p>Mail your cheque to:</p>
                    <address class="bg-light p-3 rounded-3">
                        [Church Name]<br>
                        [Street Address]<br>
                        [Suburb, State Postcode]<br>
                        Australia
                    </address>
                </div>
                
                <div class="alert alert-info">
                    <h6><i class="fas fa-info-circle me-2"></i> Please Note:</h6>
                    <ul class="mb-0">
                        <li>Include your name and address with the cheque</li>
                        <li>Tax receipts mailed within 5 business days</li>
                        <li>Allow 7-10 days for processing</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Understood</button>
            </div>
        </div>
    </div>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script src="https://js.stripe.com/v3/"></script>
<script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=AUD"></script>
<script>
// Initialize Stripe
const stripe = Stripe('{{ STRIPE_PUBLIC_KEY }}');
let elements;
let cardElement;

// Initialize payment form
async function initializePaymentForm() {
    // Create Stripe elements
    elements = stripe.elements();
    
    // Create card element
    cardElement = elements.create('card', {
        style: {
            base: {
                fontSize: '16px',
                color: '#32325d',
                fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
                '::placeholder': {
                    color: '#aab7c4'
                }
            },
            invalid: {
                color: '#fa755a',
                iconColor: '#fa755a'
            }
        },
        hidePostalCode: true
    });
    cardElement.mount('#card-element');
    
    // Setup payment method handlers
    setupPaymentMethodHandlers();
    
    // Initialize PayPal button
    initializePayPal();
    
    // Update summary initially
    updateSummary();
}

// Setup payment method change handlers
function setupPaymentMethodHandlers() {
    // Card payment
    document.getElementById('method-card').addEventListener('change', function() {
        document.getElementById('card-element').style.display = this.checked ? 'block' : 'none';
    });
    
    // Apple Pay
    if (stripe.applePay) {
        document.getElementById('method-apple').parentElement.style.display = 'block';
        document.getElementById('method-apple').addEventListener('change', function() {
            if (this.checked) initializeApplePay();
        });
    }
    
    // Google Pay
    if (stripe.googlePay) {
        document.getElementById('method-google').parentElement.style.display = 'block';
        document.getElementById('method-google').addEventListener('change', function() {
            if (this.checked) initializeGooglePay();
        });
    }
    
    // Direct Debit
    document.getElementById('method-direct-debit').addEventListener('change', function() {
        document.getElementById('direct-debit-fields').style.display = this.checked ? 'block' : 'none';
    });
}

// Initialize PayPal
function initializePayPal() {
    paypal.Buttons({
        createOrder: function(data, actions) {
            return actions.order.create({
                purchase_units: [{
                    amount: {
                        value: getDonationAmount(),
                        currency_code: 'AUD'
                    },
                    description: getFundDescription()
                }]
            });
        },
        onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
                submitPaypalDonation(details);
            });
        },
        onError: function(err) {
            showPaymentError(err);
        }
    }).render('#paypal-button-container');
}

// Initialize Apple Pay
async function initializeApplePay() {
    const paymentRequest = stripe.paymentRequest({
        country: 'AU',
        currency: 'aud',
        total: {
            label: getFundDescription(),
            amount: Math.round(getDonationAmount() * 100), // in cents
        },
        requestPayerName: true,
        requestPayerEmail: true
    });

    // Check if Apple Pay is available
    const result = await paymentRequest.canMakePayment();
    if (result) {
        const applePayButton = document.getElementById('apple-pay-button');
        applePayButton.innerHTML = '';
        paymentRequest.on('paymentmethod', handlePaymentMethod);
        paymentRequest.show(applePayButton);
    } else {
        document.getElementById('method-apple').checked = false;
        showPaymentError('Apple Pay is not available on this device');
    }
}

// Initialize Google Pay
async function initializeGooglePay() {
    const paymentRequest = stripe.paymentRequest({
        country: 'AU',
        currency: 'aud',
        total: {
            label: getFundDescription(),
            amount: Math.round(getDonationAmount() * 100), // in cents
        },
        requestPayerName: true,
        requestPayerEmail: true
    });

    // Check if Google Pay is available
    const result = await paymentRequest.canMakePayment();
    if (result) {
        const googlePayButton = document.getElementById('google-pay-button');
        googlePayButton.innerHTML = '';
        const button = paymentRequest.createButton({
            buttonType: 'donate',
            buttonColor: 'black'
        });
        googlePayButton.appendChild(button);
        paymentRequest.on('paymentmethod', handlePaymentMethod);
    } else {
        document.getElementById('method-google').checked = false;
        showPaymentError('Google Pay is not available on this device');
    }
}

// Handle payment method selection (for Apple/Google Pay)
async function handlePaymentMethod(ev) {
    try {
        const {error, paymentIntent} = await stripe.confirmPayment({
            elements,
            clientSecret: '{{ client_secret }}',
            confirmParams: {
                payment_method: ev.paymentMethod.id,
                return_url: window.location.href,
            },
        });

        if (error) {
            showPaymentError(error.message);
            ev.complete('fail');
        } else {
            await completeDonation(paymentIntent);
            ev.complete('success');
        }
    } catch (err) {
        showPaymentError(err.message);
        ev.complete('fail');
    }
}

// Submit PayPal donation
async function submitPaypalDonation(details) {
    const submitBtn = document.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Processing PayPal...';

    try {
        const response = await fetch('/process-paypal-donation/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: new URLSearchParams({
                'payment_method': 'paypal',
                'amount': getDonationAmount(),
                'fund_id': document.querySelector('input[name="fund"]:checked').value,
                'is_recurring': document.getElementById('is_recurring').checked ? 'true' : 'false',
                'paypal_order_id': details.id,
                'paypal_payer_id': details.payer.payer_id
            })
        });

        const data = await response.json();
        
        if (data.success) {
            showSuccessMessage('PayPal donation completed successfully!');
            window.location.href = `/donation-complete/?id=${data.donation_id}`;
        } else {
            throw new Error(data.error || 'Payment failed');
        }
    } catch (error) {
        showPaymentError(error.message);
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-lock me-2"></i> Complete Donation';
    }
}

// Process direct debit
async function processDirectDebit() {
    const submitBtn = document.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Setting Up Direct Debit...';

    try {
        const formData = new FormData(document.getElementById('donation-form'));
        formData.append('payment_method', 'direct_debit');
        formData.append('amount', getDonationAmount());
        formData.append('fund_id', document.querySelector('input[name="fund"]:checked').value);
        formData.append('is_recurring', document.getElementById('is_recurring').checked ? 'true' : 'false');

        const response = await fetch('/process-direct-debit/', {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            }
        });

        const data = await response.json();
        
        if (data.success) {
            showSuccessMessage('Direct debit set up successfully!');
            window.location.href = `/donation-complete/?id=${data.donation_id}`;
        } else {
            throw new Error(data.error || 'Direct debit setup failed');
        }
    } catch (error) {
        showPaymentError(error.message);
        document.getElementById('method-direct-debit').checked = false;
        document.getElementById('direct-debit-fields').style.display = 'none';
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-lock me-2"></i> Complete Donation';
    }
}

// Handle form submission
document.getElementById('donation-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const paymentMethod = document.querySelector('input[name="payment_method"]:checked').value;
    
    if (paymentMethod === 'card') {
        await processCardPayment();
    } else if (paymentMethod === 'direct_debit') {
        await processDirectDebit();
    }
    // PayPal, Apple Pay, Google Pay are handled by their own buttons
});

// Process card payment
async function processCardPayment() {
    const submitBtn = document.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Processing Payment...';

    try {
        // First create or get a payment intent
        const intentResponse = await fetch('/create-payment-intent/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: new URLSearchParams({
                'amount': getDonationAmount(),
                'fund_id': document.querySelector('input[name="fund"]:checked').value,
                'is_recurring': document.getElementById('is_recurring').checked ? 'true' : 'false'
            })
        });

        const intentData = await intentResponse.json();
        
        if (!intentData.client_secret) {
            throw new Error('Failed to create payment intent');
        }

        // Confirm the card payment
        const {error, paymentIntent} = await stripe.confirmCardPayment(
            intentData.client_secret, {
                payment_method: {
                    card: cardElement,
                    billing_details: getBillingDetails()
                }
            }
        );

        if (error) {
            throw error;
        }

        // Complete the donation on our server
        await completeDonation(paymentIntent);
    } catch (error) {
        showPaymentError(error.message);
    } finally {
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-lock me-2"></i> Complete Donation';
    }
}

// Complete donation on server
async function completeDonation(paymentIntent) {
    try {
        const response = await fetch('/confirm-payment/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}'
            },
            body: JSON.stringify({
                payment_intent_id: paymentIntent.id,
                amount: getDonationAmount(),
                fund_id: document.querySelector('input[name="fund"]:checked').value,
                is_recurring: document.getElementById('is_recurring').checked
            })
        });

        const data = await response.json();
        
        if (data.success) {
            showSuccessMessage('Payment completed successfully!');
            window.location.href = `/donation-complete/?id=${data.donation_id}`;
        } else {
            throw new Error(data.error || 'Payment confirmation failed');
        }
    } catch (error) {
        showPaymentError(error.message);
    }
}

// Helper functions
function getDonationAmount() {
    const amount = document.querySelector('input[name="amount"]:checked').value;
    return amount === 'other' ? 
        parseFloat(document.querySelector('input[name="custom_amount"]').value) || 0 : 
        parseFloat(amount);
}

function getFundDescription() {
    return document.querySelector('input[name="fund"]:checked + label h5').textContent;
}

function getBillingDetails() {
    return {
        name: `${document.querySelector('input[name="first_name"]').value} ${document.querySelector('input[name="last_name"]').value}`,
        email: document.querySelector('input[name="email"]').value,
        phone: document.querySelector('input[name="phone"]').value,
        address: {
            line1: document.querySelector('input[name="address"]').value,
            city: document.querySelector('input[name="suburb"]').value,
            state: document.querySelector('select[name="state"]').value,
            postal_code: document.querySelector('input[name="postcode"]').value,
            country: 'AU'
        }
    };
}

function updateSummary() {
    // Update amount
    const amount = getDonationAmount();
    document.getElementById('summary-amount').textContent = `$${amount.toFixed(2)}`;
    document.getElementById('summary-total').textContent = `$${amount.toFixed(2)}`;
    
    // Update fund
    const fund = document.querySelector('input[name="fund"]:checked');
    if (fund) {
        document.getElementById('summary-fund').textContent = fund.nextElementSibling.querySelector('h5').textContent;
    }
    
    // Update frequency
    const isRecurring = document.getElementById('is_recurring').checked;
    document.getElementById('summary-frequency').textContent = isRecurring ? 'Monthly' : 'One-time';
    
    // Update payment method
    const paymentMethod = document.querySelector('input[name="payment_method"]:checked');
    if (paymentMethod) {
        document.getElementById('summary-method').textContent = paymentMethod.nextElementSibling.querySelector('h5').textContent;
    }
}

function showSuccessMessage(message) {
    // Replace with your preferred notification system
    const successDiv = document.createElement('div');
    successDiv.className = 'alert alert-success';
    successDiv.textContent = message;
    document.querySelector('.card-body').prepend(successDiv);
    setTimeout(() => successDiv.remove(), 5000);
}

function showPaymentError(message) {
    // Replace with your preferred error display
    const errorDiv = document.createElement('div');
    errorDiv.className = 'alert alert-danger';
    errorDiv.textContent = typeof message === 'string' ? message : 'Payment failed. Please try again.';
    document.querySelector('.card-body').prepend(errorDiv);
    setTimeout(() => errorDiv.remove(), 5000);
}


// Stepper functionality
document.addEventListener('DOMContentLoaded', function() {
    // Initialize the stepper
    const steps = document.querySelectorAll('.step-content');
    const nextButtons = document.querySelectorAll('.next-step');
    const prevButtons = document.querySelectorAll('.prev-step');
    
    // Show first step by default
    steps[0].classList.add('active');
    
    // Next button click handler
    nextButtons.forEach(button => {
        button.addEventListener('click', function() {
            const currentStep = document.querySelector('.step-content.active');
            const currentStepNumber = parseInt(currentStep.dataset.step);
            const nextStepNumber = currentStepNumber + 1;
            
            // Validate current step before proceeding
            if (validateStep(currentStepNumber)) {
                // Hide current step
                currentStep.classList.remove('active');
                
                // Show next step
                document.querySelector(`.step-content[data-step="${nextStepNumber}"]`).classList.add('active');
                
                // Update stepper UI
                updateStepperUI(nextStepNumber);
                
                // Update summary
                updateSummary();
            }
        });
    });
    
    // Previous button click handler
    prevButtons.forEach(button => {
        button.addEventListener('click', function() {
            const currentStep = document.querySelector('.step-content.active');
            const currentStepNumber = parseInt(currentStep.dataset.step);
            const prevStepNumber = currentStepNumber - 1;
            
            // Hide current step
            currentStep.classList.remove('active');
            
            // Show previous step
            document.querySelector(`.step-content[data-step="${prevStepNumber}"]`).classList.add('active');
            
            // Update stepper UI
            updateStepperUI(prevStepNumber);
        });
    });
    
    // Function to update stepper UI
    function updateStepperUI(stepNumber) {
        // Reset all stepper items
        document.querySelectorAll('.stepper-item').forEach(item => {
            item.classList.remove('active');
        });
        
        // Activate current step
        document.querySelector(`.stepper-item[data-step="${stepNumber}"]`).classList.add('active');
        
        // Update progress bar
        const progress = ((stepNumber - 1) / (steps.length - 1)) * 100;
        document.querySelector('.stepper-progress-bar').style.width = `${progress}%`;
        
        // Disable/enable previous button
        const prevButtons = document.querySelectorAll('.prev-step');
        prevButtons.forEach(button => {
            button.disabled = stepNumber === 1;
            button.classList.toggle('disabled', stepNumber === 1);
        });
    }
    
    // Function to validate current step
    function validateStep(stepNumber) {
        switch(stepNumber) {
            case 1: // Amount selection
                const amountSelected = document.querySelector('input[name="amount"]:checked');
                if (!amountSelected) {
                    showPaymentError('Please select an amount');
                    return false;
                }
                if (amountSelected.value === 'other') {
                    const customAmount = document.querySelector('input[name="custom_amount"]').value;
                    if (!customAmount || isNaN(customAmount) || parseFloat(customAmount) <= 0) {
                        showPaymentError('Please enter a valid amount');
                        return false;
                    }
                }
                return true;
                
            case 2: // Fund selection
                const fundSelected = document.querySelector('input[name="fund"]:checked');
                if (!fundSelected) {
                    showPaymentError('Please select a fund');
                    return false;
                }
                return true;
                
            case 3: // Payment method
                const paymentMethodSelected = document.querySelector('input[name="payment_method"]:checked');
                if (!paymentMethodSelected) {
                    showPaymentError('Please select a payment method');
                    return false;
                }
                return true;
                
            default:
                return true;
        }
    }
    
    // Initialize the rest of your payment functionality
    initializePaymentForm();
});

// Error display function
function showPaymentError(message) {
    // Remove any existing error messages
    const existingErrors = document.querySelectorAll('.payment-error-message');
    existingErrors.forEach(error => error.remove());
    
    // Create and display new error message
    const errorDiv = document.createElement('div');
    errorDiv.className = 'alert alert-danger payment-error-message mt-3';
    errorDiv.textContent = message;
    
    // Insert after the current step content
    const currentStep = document.querySelector('.step-content.active');
    currentStep.appendChild(errorDiv);
    
    // Scroll to error
    errorDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
}


// Initialize everything when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    initializePaymentForm();
    
    // Update summary when values change
    document.querySelectorAll('input[name="amount"]').forEach(radio => {
        radio.addEventListener('change', function() {
            document.getElementById('custom-amount-container').style.display = 
                this.value === 'other' ? 'block' : 'none';
            updateSummary();
        });
    });
    
    document.querySelector('input[name="custom_amount"]')?.addEventListener('input', updateSummary);
    document.getElementById('is_recurring').addEventListener('change', updateSummary);
    document.querySelectorAll('input[name="fund"]').forEach(radio => {
        radio.addEventListener('change', updateSummary);
    });
    document.querySelectorAll('input[name="payment_method"]').forEach(radio => {
        radio.addEventListener('change', updateSummary);
    });
});
</script>


<style>
/* Stepper Styles */
.stepper {
    position: relative;
    margin-bottom: 2rem;
}

.stepper-progress {
    height: 4px;
    background-color: #e9ecef;
    border-radius: 2px;
    margin-bottom: 1.5rem;
}

.stepper-progress-bar {
    height: 100%;
    background-color: var(--bs-primary);
    border-radius: 2px;
    transition: width 0.3s ease;
}

.stepper-items {
    display: flex;
    justify-content: space-between;
    position: relative;
}

.stepper-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    position: relative;
    z-index: 1;
}

.stepper-item:not(:last-child):after {
    content: '';
    position: absolute;
    top: 15px;
    left: 50%;
    width: 100%;
    height: 2px;
    background-color: #e9ecef;
    z-index: -1;
}

.stepper-item.active:not(:last-child):after {
    background-color: var(--bs-primary);
}

.stepper-item-counter {
    width: 30px;
    height: 30px;
    background-color: #e9ecef;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #6c757d;
}

.stepper-item.active .stepper-item-counter {
    background-color: var(--bs-primary);
    color: white;
}

.stepper-item-label {
    font-size: 0.875rem;
    color: #6c757d;
    text-align: center;
}

.stepper-item.active .stepper-item-label {
    color: var(--bs-primary);
    font-weight: 500;
}

/* Step Content */
.step-content {
    display: none;
}

.step-content.active {
    display: block;
}

/* Payment Method Styles */
.payment-option {
    border: 1px solid #dee2e6;
    border-radius: 8px;
    margin-bottom: 15px;
    transition: all 0.3s ease;
}

.payment-option:hover {
    border-color: var(--bs-primary);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
}

.payment-option .card-body {
    padding: 1.5rem;
}

.payment-icons i {
    font-size: 1.75rem;
    opacity: 0.8;
}

/* Direct Debit Fields */
#direct-debit-fields {
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 8px;
    margin-top: 15px;
}

/* Error/Success Messages */
.payment-message {
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    display: none;
}

.payment-success {
    background-color: #d1e7dd;
    color: #0f5132;
    border: 1px solid #badbcc;
}

.payment-error {
    background-color: #f8d7da;
    color: #842029;
    border: 1px solid #f5c2c7;
}

/* Custom Amount Toggle */
#custom-amount-container {
    transition: all 0.3s ease;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .payment-option .card-body {
        padding: 1rem;
    }
    
    .payment-option .form-check-label h5 {
        font-size: 1rem;
    }
    
    .stepper-item-label {
        font-size: 0.75rem;
    }
}
</style>

{% endblock %}